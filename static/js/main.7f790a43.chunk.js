(this.webpackJsonpbookshelf=this.webpackJsonpbookshelf||[]).push([[0],{28:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var a=c(2),o=c.n(a),n=c(20),s=c.n(n),r=c(9),i=c(8),l=c(3),j=(c(28),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,o=Object(a.useState)(null),n=Object(r.a)(o,2),s=n[0],i=n[1],l=Object(a.useState)(!0),j=Object(r.a)(l,2),b=j[0],h=j[1],d=Object(a.useState)(null),u=Object(r.a)(d,2),O=u[0],x=u[1];return Object(a.useEffect)((function(){var c=new AbortController;return setTimeout((function(){fetch(e,t).then((function(e){if(!e.ok)throw Error("could not fetch the data for that resource");return e.json()})).then((function(e){h(!1),i(e),x(null)})).catch((function(e){"AbortError"===e.name?console.log("fetch aborted"):(h(!1),x(e.message))}))})),function(){return c.abort()}}),[e,c]),{data:s,isPending:b,error:O}}),b=c(10),h=(c(16),c(21),"https://reactnd-books-api.udacity.com"),d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var u={Accept:"application/json",Authorization:d},O=c(1),x=function(e){var t=e.book,c=(e.shelf,e.setShelf,Object(a.useState)(!1)),o=Object(r.a)(c,2),n=o[0],s=o[1],i=Object(a.useContext)(T),l=i.data.books,j={};l.map((function(e){return j[e.id]=e.shelf}));var d=Object(a.useState)(j[t.id]),x=Object(r.a)(d,2),f=x[0],k=x[1],m=function(e){(function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)(Object(b.a)({},u),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})(t,e).then((function(){k(e),s(!n),i.setBookStat(!i.bookStat)}))};return Object(O.jsxs)("div",{className:"book-card",children:[t.imageLinks&&Object(O.jsx)("img",{src:t.imageLinks.smallThumbnail,alt:"".concat(t.title)}),!t.imageLinks&&Object(O.jsx)("img",{alt:"not found"}),Object(O.jsxs)("select",{name:"shelf-status",id:"book-shelf",className:"shelf-status",onChange:function(e){m(e.target.value)},value:f,children:[Object(O.jsx)("option",{value:"none",children:"none"}),Object(O.jsx)("option",{value:"read",children:"read"}),Object(O.jsx)("option",{value:"currentlyReading",children:"reading"}),Object(O.jsx)("option",{value:"wantToRead",children:"want to read"})]}),Object(O.jsx)("h3",{className:"book-title",children:t.title}),t.authors&&t.authors.map((function(e){return Object(O.jsx)("span",{className:"book-author",children:e},t.id+e)}))]})},f=function(e){return Object(O.jsxs)("div",{className:"shelf",children:[Object(O.jsx)("h1",{className:"shelf-title",children:e.title}),e.isloading?Object(O.jsx)("h3",{children:"loading..."}):Object(O.jsxs)("div",{className:"books-container",children:[""===e.books&&Object(O.jsx)("h3",{children:"No books found"}),e.books.error&&Object(O.jsx)("h3",{children:"No books found"}),"empty query"!==e.books.error&&e.books.map((function(e){return Object(O.jsx)(x,{book:e},e.id)}))]})]})},k=c(12),m=function(){var e=Object(a.useContext)(T),t=e.data,c=e.isLoading,o=e.error;return Object(O.jsxs)("main",{className:"container",children:[o&&Object(O.jsx)("h1",{children:o}),c&&Object(O.jsxs)("div",{className:"icon-holder",children:[Object(O.jsx)(k.b,{className:"search-icon"}),Object(O.jsx)("h2",{className:"loading",children:"Loading ..."})]}),t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f,{title:"Reading",books:t.books.filter((function(e){return"currentlyReading"===e.shelf})),isloading:c}),Object(O.jsx)(f,{title:"Read",books:t.books.filter((function(e){return"read"===e.shelf})),isloading:c}),Object(O.jsx)(f,{title:"To Read",books:t.books.filter((function(e){return"wantToRead"===e.shelf})),isloading:c})]}),Object(O.jsx)("div",{className:"add-book",children:Object(O.jsx)(i.b,{to:"/bookshelf-react/search",className:"link",children:"+"})})]})},g=function(){return Object(O.jsx)("header",{className:"header",children:Object(O.jsx)("h1",{className:"logo",children:Object(O.jsx)(i.b,{to:"/bookshelf-react/",className:"link",children:"BookShelf"})})})},p=c(18),N=function(e){var t=e.token,c=Object(a.useState)(" "),o=Object(r.a)(c,2),n=o[0],s=o[1],l={Accept:"application/json",Authorization:t},h={method:"POST",headers:Object(b.a)(Object(b.a)({},l),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:n})},d=j("".concat("https://reactnd-books-api.udacity.com","/search"),h,n),u=d.data,x=d.isPending,m=d.error;return Object(O.jsxs)("main",{className:"container",children:[Object(O.jsxs)("div",{className:"search-container",children:[Object(O.jsx)(i.b,{to:"/bookshelf-react/",className:"back-link",children:Object(O.jsx)(p.a,{})}),Object(O.jsx)("input",{type:"text",className:"search-bar",placeholder:"search",onKeyUp:function(e){!function(e){console.log(e.target.value),""===e.target.value?s(" "):s(e.target.value)}(e)}})]})," "===n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{style:{textAlign:"center",fontWeight:400},children:"Type something to search"}),Object(O.jsx)("div",{className:"icon-holder",children:Object(O.jsx)(k.b,{className:"search-icon"})})]}),m&&Object(O.jsx)("h1",{children:m}),u&&" "!==n&&Object(O.jsx)(f,{title:"Search Results",books:u.books,isloading:x}),Object(O.jsx)("div",{className:"add-book",children:Object(O.jsx)(i.b,{to:"/bookshelf-react/",className:"link",children:Object(O.jsx)(p.b,{})})})]})},v=function(){return Object(O.jsxs)("div",{className:"not-found",children:[Object(O.jsx)("h1",{className:"error-404",children:"404"}),Object(O.jsx)("h1",{className:"text",children:"Page Not Found"}),Object(O.jsx)(i.b,{to:"/bookshelf-react/",className:"link",children:"Back to Home Page"})]})},S=c(19),y=function(){return Object(O.jsx)("footer",{className:"footer",children:Object(O.jsxs)("span",{children:["Made with love ",Object(O.jsx)(k.a,{className:"icon"})," and some React"," ",Object(O.jsx)(S.b,{className:"react-icon icon"})," by"," ",Object(O.jsxs)("a",{href:"https://github.com/dacitto",className:"github-link",target:"_blank",rel:"noreferrer",children:["Salah Eddine Daci ",Object(O.jsx)(S.a,{className:"icon"})]})]})})},T=o.a.createContext();var A=function(){var e=localStorage.token;e||(e=localStorage.token=Math.random().toString(36).substr(-8));var t=Object(a.useState)(!1),c=Object(r.a)(t,2),o=c[0],n=c[1],s=j("https://reactnd-books-api.udacity.com/books",{headers:{Accept:"application/json",Authorization:e}},o),b=s.data,h=s.isPending,d=s.error;return Object(O.jsxs)(i.a,{children:[Object(O.jsx)(g,{}),Object(O.jsx)(T.Provider,{value:{data:b,isLoading:h,error:d,bookStat:o,setBookStat:n},children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/bookshelf-react/",exact:!0,children:Object(O.jsx)(m,{})}),Object(O.jsx)(l.a,{path:"/bookshelf-react/Search",exact:!0,children:Object(O.jsx)(N,{token:e})}),Object(O.jsx)(l.a,{path:"/bookshelf-react/",children:Object(O.jsx)(v,{})})]})}),Object(O.jsx)(y,{})]})};s.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(A,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.7f790a43.chunk.js.map